#!/usr/bin/env php
<?php
/**
 * Executes the specificed Console Command (ex: ./console.php pmi:deploy --help)
 */

require __DIR__ . '/../vendor/autoload.php';

use Symfony\Component\Console\Application;

$application = new Application();

// Add all command classes found in src/Pmi/Console/Command
$commandDirectory = realpath(__DIR__ . '/../src/Pmi/Console/Command/');
$commands = glob("{$commandDirectory}/*Command.php");
foreach ($commands as $command) {
    if (preg_match('/\/(\w+)\.php$/', $command, $m)) {
        $commandClass = "Pmi\\Console\\Command\\{$m[1]}";
        $application->add(new $commandClass());
    }
}
$application->run();

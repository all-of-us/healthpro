{% extends 'base.html.twig' %}
{% block title %}Participant Work Queue - {% endblock %}
{% set surveys = {
    'Sociodemographics': 'Demo',
    'MedicalHistory': 'Hist',
    'Medications': 'Meds',
    'OverallHealth': 'Health',
    'PersonalHabits': 'Habits',
    'FamilyHealth': 'Family',
    'HealthcareAccess': 'Access',
    'Sleep': 'Sleep',
} %}
{% block body %}
    <div class="page-header">
        <h2>Participant Work Queue</h2>
    </div>

    <table class="table table-striped table-bordered table-small">
        <thead>
            <tr>
                <th rowspan="2">Last Name</th>
                <th rowspan="2">First Name</th>
                <th rowspan="2">Phone Number</th>
                <th rowspan="2">Email Address</th>
                <th colspan="{{ surveys|length }}" class="topheader multiheader-survey">Research Survey Completion Status</th>
                <th colspan="3" class="topheader multiheader-status">Status</th>
            </tr>
            <tr>
                {% for field, label in surveys %}
                    <th class="secondaryheader multiheader-survey">{{ label }}</th>
                {% endfor %}
                <th class="secondaryheader multiheader-status">Enrollment</th>
                <th class="secondaryheader multiheader-status">Phys Meas</th>
                <th class="secondaryheader multiheader-status">Biobanking</th>
            </tr>
        </thead>
        <tbody>
            {% for participant in participants %}
                <tr>
                    <td>{{ participant.lastName }}</td>
                    <td>{{ participant.firstName }}</td>
                    <td><nobr>{{ participant.phoneNumber }}</nobr></td>
                    <td><a href="mailto:{{ participant.emailAddress }}">{{ participant.emailAddress }}</a></td>
                    {% for field, label in surveys %}
                        <td class="text-center">
                            {% if participant['questionnaireOn' ~ field]|default('') == 'SUBMITTED' %}
                                <i class="fa fa-check text-success" aria-hidden="true"></i>
                            {% else %}
                                <i class="fa fa-times text-danger" aria-hidden="true"></i>
                            {% endif %}
                        </td>
                    {% endfor %}

                    <td class="text-center">
                        {% if participant.consentForStudyEnrollment == 'SUBMITTED' %}
                            <i class="fa fa-check text-success" aria-hidden="true"></i>
                        {% else %}
                            <i class="fa fa-times text-danger" aria-hidden="true"></i>
                        {% endif %}
                    </td>
                    <td class="text-center">
                        {% if participant.physicalEvaluationStatus == 'SUBMITTED' %}
                            <i class="fa fa-check text-success" aria-hidden="true"></i>
                        {% else %}
                            <i class="fa fa-times text-danger" aria-hidden="true"></i>
                        {% endif %}
                    </td>
                    <td class="text-center">
                        <strong class="text-{{ participant.biobankStatus == 7 ? 'success' : 'danger' }}">{{ participant.biobankStatus }}/7</strong>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}
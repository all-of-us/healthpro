{% extends 'base.html.twig' %}
{% import 'order-samples.html.twig' as samples %}
{% form_theme confirmForm 'form/simple_checkbox.html.twig' %}
{% block title %}Order - {% endblock %}
{% block body %}
    <h2>
        <i class="fa fa-medkit" aria-hidden="true"></i>
        New Biobank order
        <small><a href="{{ path('participant', { id: participant.id }) }}">{{ participant.lastName }}, {{ participant.firstName }}</a></small>
    </h2>

    <dl class="dl-horizontal">
        <dt>Name</dt>
        <dd>{{ participant.lastName }}, {{ participant.firstName }}</dd>
        <dt>Participant ID</dt>
        <dd>{{ participant.id }}</dd>
        <dt>Biobank ID</dt>
        <dd>{{ participant.biobankId }}</dd>
        <dt>DOB</dt>
        <dd>{{ participant.dob ? participant.dob|date('n/j/Y') }}</dd>
        <dt>Gender Identity</dt>
        <dd>{{ participant.genderIdentity }}</dd>
    </dl>
    <ul class="nav nav-tabs">
        <li role="presentation" class="disabled"><a href="#"><i class="fa fa-check-circle" aria-hidden="true"></i> Safety Check</a></li>
        <li role="presentation" class="active"><a href="#">Create</a></li>
        {% for step in ['Print Labels', 'Collect', 'Process', 'Finalize', 'Print Requisition'] %}
            <li role="presentation" class="disabled"><a href="#">{{ step }}</a></li>
        {% endfor %}
    </ul>
    <br />

    <div id="createOrder">
        {{ form_start(confirmForm, { attr: { class: 'warn-unsaved disable-enter prevent-resubmit' } }) }}
            {{ form_errors(confirmForm) }}
            <div class="row row-equal-height">
                <div class="col-sm-6 col-md-5">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title text-center">HPO Biobank Order</h3>
                        </div>
                        <div class="panel-body">
                            <div class="text-center">
                                <div id="customize-off" {% if showCustom %} style="display:none"{% endif %}>
                                    <p>Create an order for all 7 All of Us℠ biospecimens</p>
                                    <p>
                                        <button type="submit" name="standard" class="btn btn-primary">Create</button>
                                    </p>
                                    <p>
                                        <a href="#" id="customize-enable">Customize order</a>
                                    </p>
                                </div>
                            </div>
                            <div{% if not showCustom %} style="display:none"{% endif %} id="customize-on">
                                <p class="text-center">Customize your All of Us℠ biobank order</p>
                                <div class="form-group{% if not confirmForm.samples.vars.valid %} has-error{% endif %}">
                                    {{ form_label(confirmForm.samples) }}
                                    {{ samples.form_widget(confirmForm.samples, false, samplesInfo) }}
                                    {{ form_errors(confirmForm.samples) }}
                                </div>
                                <div class="text-center">
                                    <p>
                                        <button type="submit" name="custom" class="btn btn-primary">Create custom order</button>
                                    </p>
                                    <p>
                                        <a href="#" id="customize-disable">Revert to standard order</a>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6 col-md-4">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title text-center">DV Biobank Order</h3>
                        </div>
                        <div class="panel-body">
                            <p class="text-center">Register an All of Us℠ Biospecimen Kit</p>
                                <br />
                                {{ form_row(confirmForm.kitId) }}
                            <p class="text-center">
                                <button type="submit" name="existing" class="btn btn-primary">Create</button>
                            </p>
                            {% if app.isDVType and app.reportKitUrl%}
                                <p class="text-center">
                                    <a data-href="{{ app.reportKitUrl }}" class="external-link text-danger">Report Kit Problem</a>
                                </p>
                            {% endif %}
                        </div>
                    </div>
                </div>
                <div class="col-sm-6 col-sm-offset-3 col-md-3 col-md-offset-0">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title text-center">Saliva Biobank Order</h3>
                        </div>
                        <div class="panel-body text-center">
                            <p>
                                Order a saliva biospecimen only if the participant is unable to provide any of the three EDTA blood tubes.
                            </p>
                            <p>
                                <button type="submit" name="saliva" class="btn btn-primary">Create</button>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <p class="text-center">
                <a href="{{ path('participant', { id: participant.id }) }}" class="btn btn-default">Cancel</a>
            </p>
            {{ form_rest(confirmForm) }}
        {{ form_end(confirmForm) }}
    </div>
{% endblock %}

{% extends 'base.html.twig' %}
{% block title %}Notifications - {% endblock %}
{% block body %}
    <ol class="breadcrumb">
        <li><a href="{{ path('home') }}">Home</a></li>
        <li><a href="{{ path('admin_home') }}">Admin</a></li>
        <li class="active">Notifications</li>
    </ol>
    <div class="page-header">
        <h2><i class="fa fa-bell" aria-hidden="true"></i> Email Notifications</h2>
    </div>
    <div role="tabpanel">
        <ul class="nav nav-tabs" role="tablist">
            <li role="presentation" class="active">
                <a href="#withdrawal" aria-controls="tab" role="tab" data-toggle="tab">Withdrawal</a>
            </li>
            <li role="presentation">
                <a href="#deactivate" aria-controls="tab" role="tab" data-toggle="tab">Deactivate</a>
            </li>
        </ul>
        <br />
        <div class="tab-content">
            <div role="withdrawal" class="tab-pane active" id="withdrawal">
                <table class="table table-striped table-hover">
                    <thead><tr><th>Time</th><th>Organization</th><th># Withdrawn Participants</th><th>Notified Emails</th></tr></thead>
                    <tbody>
                    {% for withdrawalLog in withdrawalLogs %}
                        <tr>
                            <td data-order="{{ withdrawalLog.insertTs|date('n/j/Y g:ia') }}">{{ withdrawalLog.insertTs|date('n/j/Y g:ia', app.user.timezone) }}</td>
                            <td>{{ withdrawalLog.hpoId }}</td>
                            <td>{{ withdrawalLog.count }}</td>
                            <td>{{ withdrawalLog.email }}</td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
            <div role="deactivate" class="tab-pane" id="deactivate">
                <table class="table table-striped table-hover">
                    <thead><tr><th>Time</th><th>Organization</th><th># Deactivated Participants</th><th>Notified Emails</th></tr></thead>
                    <tbody>
                    {% for deactivateLog in deactivateLogs %}
                        <tr>
                            <td data-order="{{ deactivateLog.insertTs|date('n/j/Y g:ia') }}">{{ deactivateLog.insertTs|date('n/j/Y g:ia', app.user.timezone) }}</td>
                            <td>{{ deactivateLog.hpoId }}</td>
                            <td>{{ deactivateLog.count }}</td>
                            <td>{{ deactivateLog.email }}</td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
{% endblock %}

{% block pagejs %}
    <script>
        $(document).ready(function() {
            $('table').DataTable({
                order: [[0, 'desc']],
                pageLength: 25
            });
        });
    </script>
{% endblock %}

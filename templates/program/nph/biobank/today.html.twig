{% extends 'program/nph/biobank/base.html.twig' %}
{% block title %}Today - Biobank Orders - {% endblock %}
{% block bodycontainer %}container-fluid{% endblock %}
{% set missingName = '' %}
{% import 'program/nph/order/macros/display-text.html.twig' as macros %}

{% block body %}
    {% include 'program/nph/biobank/review-page-heading.html.twig' %}
    <table class="table table-bordered table-small">
        <thead>
        <tr>
            <th>Site</th>
            <th>Biobank ID</th>
            <th>Module</th>
            <th>Visit</th>
            <th>Timepoint</th>
            <th>Order ID</th>
            <th>Samples</th>
            <th>Sample ID</th>
            <th>Created By</th>
            <th>Created <span class="badge">0</span></th>
            <th>Collected <span class="badge badge-warning">0</span></th>
            <th>Aliquoted and Finalized <span class="badge badge-success">0</span></th>
            <th>Status</th>
        </tr>
        </thead>
        <tbody>
        {% for sample in samples %}
            <tr>
                <td>{{ siteInfo.getNphSiteDisplayName(sample.site) }}</td>
                <td>{{ sample.biobankId }}</td>
                <td>{{ sample.module }}</td>
                <td>{{ sample.visitType }}</td>
                <td>{{ sample.timepoint }}</td>
                <td>
                    <a href="{{ path('nph_order_collect', {participantId: sample.participantId, orderId: sample.hpoOrderId}) }}">{{ sample.orderId }}</a>
                </td>
                <td>{{ sample.sampleCode }}</td>
                <td>{{ sample.sampleId }}</td>
                <td>{{ sample.email }}</td>
                <td>{{ macros.displayDateAndTimezone(sample.createdTs, sample.createdTimezoneId) }}</td>
                <td>{{ macros.displayDateAndTimezone(sample.collectedTs, sample.collectedTimezoneId) }}</td>
                <td>{{ macros.displayDateAndTimezone(sample.finalizedTs, sample.finalizedTimezoneId) }}</td>
                <td>{{ macros.displayBiobankSampleStatus(sample) }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endblock %}

{% block pagejs %}
    <script>
        $(document).ready(function () {
            $('table').DataTable({
                order: [[9, 'desc']],
                pageLength: 25
            });
        });
    </script>
{% endblock %}

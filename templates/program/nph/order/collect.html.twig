{% extends 'base.html.twig' %}
{% import 'program/nph/order/samples.html.twig' as samples %}
{% block title %} Order Collect - {% endblock %}
{% block body %}
    {% include 'program/nph/order/partials/order-header.html.twig' %}
    <p class="alert bg-light well-sm">
        {{ order.timepoint }} {{ order.orderType }}
    </p>
    <div class="row">
        <div class="col-sm-12">
            <h5>Which samples where successfully collected?</h5>
            {{ form_start(orderCollectForm, { attr: { class: 'disable-enter prevent-resubmit'} }) }}
            {{ form_errors(orderCollectForm) }}
            {% if order.orderType == 'urine' or  order.orderType == 'stool' %}
                {% for nphSample in order.nphSamples %}
                    {{ form_widget(orderCollectForm[nphSample.sampleCode]) }}
                    {{ form_label(orderCollectForm[nphSample.sampleCode ~ 'CollectedTs']) }}
                    {{ form_widget(orderCollectForm[nphSample.sampleCode ~ 'CollectedTs']) }}
                    {{ form_label(orderCollectForm[nphSample.sampleCode ~ 'Notes']) }}
                    {{ form_widget(orderCollectForm[nphSample.sampleCode ~ 'Notes']) }}
                {% endfor %}
                {% if order.orderType == 'urine' %}
                    <h4>
                        Color and Clarity
                        <span class="toggle-help-image" data-img="{{ asset('img/nph/urine_color_clarity_chart.png') }}">
                            <i class="fa fa-question-circle" aria-hidden="true"></i><span class="sr-only">Help</span>
                        </span>
                    </h4>
                    {{ form_label(orderCollectForm['urineColor']) }}
                    {{ form_widget(orderCollectForm['urineColor']) }}
                    {{ form_label(orderCollectForm['urineClarity']) }}
                    {{ form_widget(orderCollectForm['urineClarity']) }}
                {% endif %}
                {% if order.orderType == 'stool' %}
                    <h4>
                        Bristol Stool Chart Questions
                        <span class="toggle-help-image" data-img="{{ asset('img/nph/bristol_stool_chart.png') }}">
                            <i class="fa fa-question-circle" aria-hidden="true"></i><span class="sr-only">Help</span>
                        </span>
                    </h4>
                    <p>Enter the participant provided answers to the following questions:</p>
                    {{ form_label(orderCollectForm['bowelType']) }}
                    {{ form_widget(orderCollectForm['bowelType']) }}
                    {{ form_label(orderCollectForm['bowelQuality']) }}
                    {{ form_widget(orderCollectForm['bowelQuality']) }}
                {% endif %}
                <br>
            {% endif %}
            {{ form_rest(orderCollectForm) }}
            <button type="submit" class="btn btn-primary" id="order_next_btn">Save and Close</button>
            <a class="btn btn-default" href="#">Cancel</a>
            {{ form_end(orderCollectForm) }}
        </div>
    </div>
{% endblock %}
{% block pagejs %}
    {{ encore_entry_script_tags('nph-order') }}
{% endblock %}

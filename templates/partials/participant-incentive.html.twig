<div class="panel panel-default" id="incentive">
    <div class="panel-heading">
        <h3 class="panel-title"><i class="fa fa-plus-circle" aria-hidden="true"></i> Add New Incentive</h3>
    </div>
    <div class="panel-body">
        {{ form_start(incentiveForm, { attr: { class: 'warn-unsaved disable-enter prevent-resubmit incentive-form' } }) }}
        {{ form_errors(incentiveForm) }}
        <div class="row">
            <div class="col-md-6">
                {{ form_row(incentiveForm.incentive_date_given) }}
                {{ form_row(incentiveForm.incentive_occurrence) }}
                {{ form_row(incentiveForm.other_incentive_occurrence) }}
            </div>
            <div class="col-md-6">
                {{ form_row(incentiveForm.incentive_type) }}
                {{ form_row(incentiveForm.gift_card_type) }}
                {{ form_row(incentiveForm.other_incentive_type) }}
                {{ form_row(incentiveForm.incentive_amount) }}
                {{ form_row(incentiveForm.other_incentive_amount) }}
            </div>
        </div>
        {{ form_rest(incentiveForm) }}
        <button type="submit" id="incentive_submit" class="btn btn-primary">Submit</button>
        {% if type is defined and type == 'edit' %}
            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        {% else %}
            <button type="button" class="btn btn-default" id="incentive_cancel">Cancel</button>
        {% endif %}
        {{ form_end(incentiveForm) }}
    </div>
    {% if incentives is defined %}
        <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
        <div class="panel panel-default">
            <div class="panel-heading" role="tab" id="headingOne">
                <h4 class="panel-title">
                    <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                        View Incentive History
                    </a>
                </h4>
            </div>
            <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="panel-body">
                    {% for incentive in incentives %}
                        <div class="pull-right">
                            <i class="fa fa-trash-alt fa-lg incentive-modify" aria-hidden="true" data-attr="{{ incentive.id }}" data-href="" data-type="remove"></i>
                            <i class="fa fa-edit fa-lg incentive-modify" aria-hidden="true" data-attr="{{ incentive.id }}" data-href="{{ path('participant_incentive', { id: participant.id, incentiveId: incentive.id }) }}" data-type="amend"></i>
                        </div>
                        <dl class="dl-horizontal">
                            <dt>Date Created</dt>
                            <dd>{{ incentive.createdTs|date('m/d/Y', app.user.timezone) }}</dd>
                            <dt>User</dt>
                            <dd>{{ incentive.user.email }}</dd>
                            <dt>Site</dt>
                            <dd>{{ incentive.site }}</dd>
                            <dt>Date Incentive Given</dt>
                            <dd>{{ incentive.incentiveDateGiven|date('n/j/Y g:ia', app.user.timezone) }}</dd>
                            <dt>Incentive Occurrence</dt>
                            <dd>{{ incentive.incentiveOccurrence }}</dd>
                            {% if incentive.otherIncentiveOccurrence %}
                                <dt>Other Incentive Occurrence</dt>
                                <dd>{{ incentive.otherIncentiveOccurrence }}</dd>
                            {% endif %}
                            <dt>Incentive Type</dt>
                            <dd>
                                {{ incentive.incentiveType }}{{ incentive.giftCardType ? ', ' ~ incentive.giftCardType: '' }}
                            </dd>
                            {% if incentive.otherIncentiveType %}
                                <dt>Other Incentive Type</dt>
                                <dd>{{ incentive.otherIncentiveType }}</dd>
                            {% endif %}
                            <dt>Incentive Amount</dt>
                            <dd>{{ incentive.incentiveAmount }}</dd>
                            {% if incentive.otherIncentiveAmount %}
                                <dt>Other Incentive Amount</dt>
                                <dd>${{ incentive.otherIncentiveAmount }}</dd>
                            {% endif %}
                            <dt>Notes</dt>
                            <dd>{{ incentive.notes }}</dd>
                        </dl>
                        <hr/>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
    {% endif %}
</div>

<div class="modal fade" id="incentive_modify_model" tabindex="-1" role="dialog" aria-labelledby="unlockWarningModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-body">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Go Back</button>
                <a class="btn btn-primary incentive-ok" id="incentive-ok" data-href="" data-dismiss="modal">Ok</a>
            </div>
        </div>
    </div>
</div>

<div id="incentive_edit_modal" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
        </div>
    </div>
</div>
